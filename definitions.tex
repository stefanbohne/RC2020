\stackMath
\def\stackalignment{l}

\newcommand{\optsup}[1]{\ifthenelse{\equal{#1}{}}{}{^{#1}}}
\newcommand{\optsub}[1]{\ifthenelse{\equal{#1}{}}{}{_{#1}}}

\newcommand\slashzero{\stackinset{c}{}{c}{}{/}{0}}
\newcommand{\vn}[1]{\ensuremath{\mathit{#1}}}
\newcommand{\Z}{\mathbb{Z}}
\newcommand{\C}{\mathcal{C}}
\newcommand{\D}{\mathcal{D}}
\newcommand{\Cat}{\mathsf{Cat}}
\newcommand{\List}{\mathsf{Set}^*}
\newcommand{\Set}{\mathsf{Set}}
\newcommand{\SetP}{\mathsf{Set}_*}
\newcommand{\SetZI}{\mathsf{Set}_{0\infty}}
\newcommand{\PSet}{\mathcal{P}(\Set)}
\newcommand{\PFinSet}{\mathcal{P}_{<\infty}(\Set)}
\newcommand{\dotleq}{\mathrel{\dot\leq}}
%\newcommand{\dotplus}{\mathbin{\dot\plus}}
\newcommand{\Mon}{\mathsf{Mon}}
\newcommand{\Rel}{\mathsf{Rel}}
\newcommand{\JC}{\mathsf{J}\C}
\newcommand{\Nat}{\mathbb{N}}
\newcommand{\Bool}{\mathbb{B}}
\newcommand{\ListT}{\mathbb{L}}
\newcommand{\Lens}[1]{{\mathsf{L}#1}}
\newcommand{\LensEx}[1]{{\mathsf{L}_{\exists}#1}}
\newcommand{\JSet}{\mathsf{J}\Set}
\newcommand{\JCC}{\mathsf{JC}\C}
\newcommand{\janus}[2]{\begin{pmatrix*}[l]#1 \\ #2 \end{pmatrix*}}
\newcommand{\coreC}{\mathsf{core}\C}
\newcommand{\coreSet}{\mathsf{core}\Set}
\newcommand{\rev}[2][]{#2^{\dagger\optsup{#1}}}
\newcommand{\f}[2][]{#2{\nearrow}\ifthenelse{\equal{#1}{}}{}{_{\!\!\!#1}}}
\newcommand{\project}[3]{#3\prescript{#1\!\!\!}{}{\nearrow}_{\!\!\!#2}}
\renewcommand{\b}[2][]{#2{\searrow}\optsub{#1}}
\newcommand{\tensor}[3][]{#2 \otimes\optsup{#1} #3}
\newcommand{\fun}[1][]{{\to\optsup{#1}}}
\newcommand{\js}{{\rightleftarrows}}
%\newcommand{\homJ}[3]{[#1\mathrel{\overset{#2}{\to}}#3]}
\newcommand{\homJ}[3]{#2(#1, #3)}
\newcommand{\homC}[3][]{\homJ{#2}{\C}{#3}}
\newcommand{\homD}[2]{\homJ{#1}{\D}{#2}}
\newcommand{\homSet}[2]{\Set(#1, #2)}
\newcommand{\homSetP}[2]{\SetP(#1, #2)}
\newcommand{\homSetBT}[2]{\SetBT(#1, #2)}
\newcommand{\typerulel}[3]{#1 \vdash_{\!\lambda} #2 : #3}
\newcommand{\typerulelp}[3]{#1 \vdash^{\!\mathrm{P}}_{\!\lambda} #2 : #3}
\newcommand{\typeruled}[5]{#1 \mathrel{;} #2 \vdash_{\!\dagger} #3 : #5}
\newcommand{\sem}[2][]{\left\llbracket #2 \right\rrbracket\optsup{#1}}
\newcommand{\semL}[2][]{\sem{#2}_\lambda\optsup{#1}}
\newcommand{\semLP}[2][]{\sem{#2}^{\mathrm{P}}_\lambda\optsup{#1}}
\newcommand{\semD}[2][]{\sem{#2}_\dagger\optsup{#1}}
\newcommand{\sugar}[1]{\sem{#1}_\mathsf{S}}
\newcommand{\lget}[1]{{#1}.\mathsf{get}}
\newcommand{\lput}[1]{{#1}.\mathsf{put}}
\newcommand{\mhwriter}{\mathsf{HW}}
\newcommand{\mwrite}{\mathsf{write}}
\newcommand{\mhreader}{\mathsf{HR}}
\newcommand{\mread}{\mathsf{read}}
\newcommand{\subst}[3]{[#1/#2]#3}

\newcommand{\comp}[3][]{#2 \,{;\optsup{#1}}\, #3}
\newcommand{\compr}[3][]{#3 \,{\circ\optsup{#1}}\, #2}
\newcommand{\op}[1]{{#1^\mathrm{op}}}
\newcommand{\id}[1][]{\mathrm{id}\optsup{#1}}
\newcommand{\Id}[1][]{\mathrm{Id}\optsup{#1}}
\newcommand{\I}[1][]{\mathrm{Id}\optsup{#1}}
\newcommand{\swap}[1][]{\mathrm{\sigma}\optsup{#1}}
\newcommand{\assoc}[1][]{\mathrm{\alpha}\optsup{#1}}
\newcommand{\unitl}[1][]{\mathrm{\lambda}\optsup{#1}}
\newcommand{\unitr}[1][]{\mathrm{\rho}\optsup{#1}}
\newcommand{\fail}[1][]{\mathrm{fail}\optsup{#1}}
\newcommand{\inj}[1][]{\mathrm{inj}\optsup{#1}}
\newcommand{\dup}[1][]{\mathrm{\delta}\optsup{#1}}
\newcommand{\curry}[1][]{\mathrm{\Lambda}\optsup{#1}}
%\newcommand{\uncurry}[1][]{\rotatebox[origin=c]{180}{$\mathrm{\Lambda}$}\optsup{#1}}
\newcommand{\uncurry}[1][]{\mathrm{V}\optsup{#1}}
\newcommand{\name}[2][]{\ulcorner #2 \urcorner\optsup{#1}}
\newcommand{\unname}[2][]{\llcorner #2 \lrcorner\optsup{#1}}
\newcommand{\eval}[1][]{\mathrm{ev}\optsup{#1}}
\newcommand{\juncurry}[1][]{\mathrm{j}\mkern-2mu\rotatebox[origin=c]{180}{$\mathrm{\Lambda}$}\optsup{#1}}
\newcommand{\jcurry}[1][]{\mathrm{j}\mkern-2mu\mathrm{\Lambda}\optsup{#1}}
\newcommand{\jeval}[1][]{\mathrm{jev}\optsup{#1}}
\newcommand{\terminal}[1][]{{\varepsilon}^{#1}}
\newcommand{\munit}[1][]{\mathrm{\eta}\optsup{#1}}
\newcommand{\mjoin}[1][]{\mathrm{\mu}\optsup{#1}}
\newcommand{\mstrength}{\mathrm{t}}
\newcommand{\fix}[1][]{\mathsf{fix}\optsup{#1}}
\newcommand{\remember}[1][]{\mathsf{rmb}\optsup{#1}}
\newcommand{\forget}[1][]{\mathsf{fgt}\optsup{#1}}
\newcommand{\duplicate}[1][]{\mathsf{dup}\optsup{#1}}
\newcommand{\tbool}[1][]{\mathsf{Bool}\optsup{#1}}
\newcommand{\select}[1][]{\mathsf{sel}\optsup{#1}}
\newcommand{\orelse}[1][]{\mathrel{\obar}\optsup{#1}}
\newcommand{\defined}[1]{#1\downarrow}
\newcommand{\nlet}[3]{\mathsf{let}\,#1 = #2\,\mathsf{in}\,#3}

\newcommand{\evar}[1]{\texttt{\textit{#1}}}
\newcommand{\eapp}[2]{#1\,#2}
\newcommand{\elam}[2]{\lambda #1. #2}
\newcommand{\wlet}{\texttt{let}}
\newcommand{\win}{\texttt{in}}
\newcommand{\elet}[3]{\wlet\,#1\,\texttt{=}\,#2\,\win\,#3}
\newcommand{\eunit}{()}
\newcommand{\epair}[2]{(#1, #2)}
\newcommand{\edagger}{\mathtt{\dagger}}
\newcommand{\einjl}[1]{\eapp{\mathrm{inj}_1}{#1}}
\newcommand{\einjr}[1]{\eapp{\mathrm{inj}_2}{#1}}
\newcommand{\eorelse}{{|}}
\newcommand{\eifthenelse}[3]{\texttt{if}\,#1\,\texttt{then}\,#2\,\texttt{else}\,#3}
\newcommand{\ecaseof}[3][]{\texttt{case}\optsup{#1}\,#2\,\texttt{of} #3}
\newcommand{\ecase}[2]{\,#1\,\Rightarrow\,#2;}
\newcommand{\enil}{\mathsf{nil}}
\newcommand{\econs}{\mathsf{cons}}
\newcommand{\efail}{\mathsf{fail}}
\newcommand{\etrue}{\mathsf{true}}
\newcommand{\efalse}{\mathsf{false}}
\newcommand{\tunit}{1}
\newcommand{\tpair}[2]{#1 \mathrel{*} #2}
\newcommand{\tarrow}[3]{#1 \mathrel{#2} #3}
\newcommand{\tfun}[2]{\tarrow{#1}{\fun}{#2}}
\newcommand{\tjs}[2]{\tarrow{#1}{\js}{#2}}
\newcommand{\tlist}[1]{{#1}^{*}}

\newlist{theoremlist}{enumerate}{1}
\setlist[theoremlist]{label=(\roman{theoremlisti}),
                  ref=\thetheorem.(\roman{theoremlisti}),
                  noitemsep}
\newlist{lemmalist}{enumerate}{1}
\setlist[lemmalist]{label=(\roman{lemmalisti}),
                  ref=\thelemma.(\roman{lemmalisti}),
                  noitemsep}
\newlist{definitionlist}{enumerate}{1}
\setlist[definitionlist]{label=(\roman{definitionlisti}),
                  ref=\thedefinition.(\roman{definitionlisti}),
                  noitemsep}
\addtotheorempostheadhook[theorem]{\crefalias{theoremlisti}{listtheorem}}
\addtotheorempostheadhook[lemma]{\crefalias{lemmalisti}{listlemma}}
\addtotheorempostheadhook[definition]{\crefalias{definitionlisti}{listdefinition}}
